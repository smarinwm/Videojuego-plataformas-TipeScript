{"code":"import { __extends } from \"tslib\";\r\nimport Constantes from \"../constantes\";\r\nimport GestorBD from \"../basedatos/gestorbd\";\r\nvar FinNivel = /** @class */ (function (_super) {\r\n    __extends(FinNivel, _super);\r\n    function FinNivel() {\r\n        return _super.call(this, Constantes.ESCENAS.FINNIVEL) || this;\r\n    }\r\n    FinNivel.prototype.init = function (data) {\r\n        this.esWin = data.esWin;\r\n        this.nombreNivel = data.nombreNivel;\r\n        this.nombreFondoNivel = data.nombreFondoNivel;\r\n        this.puntuacion = data.puntuacion;\r\n    };\r\n    FinNivel.prototype.create = function () {\r\n        var _this = this;\r\n        this.imagenFondo = this.add.tileSprite(0, 0, this.cameras.main.width, this.cameras.main.height, this.nombreFondoNivel).setOrigin(0, 0).setDepth(-1);\r\n        var puntosPad = Phaser.Utils.String.Pad(this.puntuacion, 5, '0', 1);\r\n        var textoPuntuacion = Constantes.FINNIVEL.PUNTOS + \"\\n\\n\" + puntosPad;\r\n        if (this.esWin) {\r\n            var mibd = new GestorBD();\r\n            var nivel = this.nombreNivel.split(' ').join('').toLowerCase();\r\n            var mejorResultado = \"\";\r\n            if (this.puntuacion > parseInt(mibd.datos.puntuaciones[nivel])) {\r\n                textoPuntuacion += \"\\n\\n\" + Constantes.FINNIVEL.BESTSCORE;\r\n                mibd.datos.puntuaciones[nivel] = this.puntuacion;\r\n                mibd.grabarBD();\r\n            }\r\n            var winTxt = this.add.bitmapText(100, 100, Constantes.FUENTES.BITMAP, Constantes.FINNIVEL.WIN, 40).setTint(0x8338ec);\r\n            var puntosTxt = this.add.bitmapText(100, 200, Constantes.FUENTES.BITMAP, textoPuntuacion, 20).setTint(0x8338ec);\r\n        }\r\n        else {\r\n            var gameOverTxt = this.add.bitmapText(100, 100, Constantes.FUENTES.BITMAP, Constantes.FINNIVEL.GAMEOVER, 40).setTint(0xfb5607);\r\n        }\r\n        var volverTxt = this.add.bitmapText(80, 400, Constantes.FUENTES.BITMAP, Constantes.CREDITOS.VOLVER, 20).setInteractive();\r\n        volverTxt.on('pointerdown', function () {\r\n            _this.cameras.main.fade(700, 0, 0, 0);\r\n            _this.cameras.main.on('camerafadeoutcomplete', function () {\r\n                _this.scene.start(Constantes.ESCENAS.MENU);\r\n            });\r\n        });\r\n    };\r\n    FinNivel.prototype.update = function () {\r\n        this.imagenFondo.tilePositionY -= 0.4;\r\n    };\r\n    return FinNivel;\r\n}(Phaser.Scene));\r\nexport default FinNivel;\r\n","references":["/home/smm/Documentos/Pharser/videojuego/v10/src/constantes.ts","/home/smm/Documentos/Pharser/videojuego/v10/src/basedatos/gestorbd.ts"]}
